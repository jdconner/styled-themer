function t(t){return t&&"object"==typeof t&&!Array.isArray(t)}function n(t){return t&&"function"==typeof t}function e(t){return t.includes(":")}function r(t){return"!"===t.charAt(0)}function o(t){return t.split(",").map(t=>t.trim())}function u(n,...e){const r=n;return t(n)&&e.forEach(e=>{t(e)&&Object.keys(e).forEach(o=>{"__proto__"!==o&&(t(e[o])&&o in n?r[o]=u({...n[o]},e[o]):r[o]=e[o])})}),r}function c(c,i,s){const f=s&&i[s]||{};let l=function n(o,c){let i={...c};for(let[c,s]of Object.entries(i)){const f=r(c);let l=c;if(f&&(l=c.substring(1)),t(s)&&!e(c)){(f?!o[l]:!!o[l])&&(i=u({...i},n(o,i[c]))),delete i[c]}}return i}(c,u({...i},f));for(let[t,r]of Object.entries(l))if(n(r))l[t]=r(c);else if(e(t)){let e={};for(let[r,o]of Object.entries(l[t]))e[r]=n(o)?o(c):o;t.includes(",")?(o(t).forEach(t=>{l[t]={...l[t],...e}}),delete l[t]):l[t]=e}return l}export default function(t,e={}){function r(o){const i=o.theme&&o.theme.components&&o.theme.components[t]||{};return u({...c(o,i)},c(o,n(e)?e(o):e),...r.styles.map(t=>t(o)))}return r.styles=[],r.addVariant=function(t,e){return this.styles.push((function(r){const o=r[t];return c(r,n(e)?e(r):e,o)})),this},r.addGlobalVariant=function(t,e){return this.styles.push((function(r){const o=r.theme[t];return c(r,n(e)?e(r):e,o)})),this},r}
